<div class="sidebar-component">
  <div class="sidebar-navbar">
    <h2>{{ selectedTab | titlecase }}</h2>
  </div>
  <div class="search-bar">
    <input
      pInputText
      type="text"
      placeholder="Search..."
      [(ngModel)]="searchQuery"
    />
  </div>
  <div class="sidebar-contents">
    <div *ngIf="selectedTab === 'chats'" class="sidebar-contents-overflow">
      <div
        class="sidebar-individual-content-chats"
        *ngFor="let chat of chatRooms"
        (click)="selectRoom(chat)"
      >
        <i class="pi pi-user"></i>
        <h4>{{ chat.name }}</h4>
      </div>
    </div>
    <div *ngIf="selectedTab === 'groups'" class="sidebar-contents-overflow">
      <div
        class="sidebar-individual-content"
        *ngFor="let group of allChatRooms"
      >
        <div class="pic-name">
          <i class="pi pi-users"></i>
          <h4>{{ group.name }}</h4>
        </div>
        <p-button
          label="Join"
          [text]="true"
          severity="secondary"
          *ngIf="!isUserInRoom(group)"
          (click)="joinGroup(group)"
          class="join-leave-button"
        ></p-button>
        <p-button
          label="Leave"
          [text]="true"
          severity="secondary"
          *ngIf="isUserInRoom(group)"
          (click)="leaveGroup(group)"
          class="join-leave-button"
        ></p-button>
      </div>
    </div>
    <div *ngIf="selectedTab === 'peoples'" class="sidebar-contents-overflow">
      <div class="peoples-content" *ngFor="let user of allUsers">
        <div class="peoples-pic-name">
          <i *ngIf="!user.profilePicture" class="pi pi-user"></i>
          <img
            *ngIf="user.profilePicture"
            [src]="user.profilePicture"
            alt="Profile Picture"
          />
          <p>{{ user.username }}</p>
        </div>
        <p-button
          class="join-leave-button"
          [text]="true"
          severity="secondary"
          icon="pi" [icon]="hasSentRequest(user.userId) ? 'pi pi-check' : 'pi pi-user-plus'"
          (click)="addFriend(user)"
          [disabled]="hasSentRequest(user.userId)"
        >
        </p-button>
      </div>
    </div>
    
    <ng-container *ngIf="selectedTab === 'requests'">
      <div class="friend-request" *ngFor="let request of friendRequests">
        <div class="peoples-pic-name">
          <i class="pi pi-user"></i>
          <p>{{ request }}</p>
        </div>
        <p-button
          label="Accept"
          [text]="true"
          severity="success"
          (click)="acceptFriendRequest(request)"
        ></p-button>
        <p-button
          label="Decline"
          [text]="true"
          severity="danger"
          (click)="declineFriendRequest(request)"
        ></p-button>
      </div>
    </ng-container>
  </div>
</div>
